<template>
  <div class="flex flex-col rounded-t-2xl">
    <header class="w-full p-4 flex justify-between items-center rounded-t-2xl">
      <button
        title="cancel"
        class="px-2 py-1 text-xs text-white bg-red-400 hover:bg-red-600 rounded"
        @click="finishFolders('cancel')"
      >
        取消
      </button>
      <div class="flex items-center text-gray-600 space-x-0.5">
        <button
          v-show="foldersMode === 'list'"
          title="show folders in tree mode"
          class="btn p-0.5"
          @click="foldersMode = 'tree'"
        >
          <svg
            class="w-5 h-5"
            viewBox="0 0 50 50"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M33.1481 22H42.037C42.8226 21.9991 43.5757 21.6827 44.1312 21.1203C44.6867 20.5579 44.9991 19.7954 45 19V10C44.9991 9.20462 44.6867 8.44208 44.1312 7.87967C43.5757 7.31725 42.8226 7.00089 42.037 7H33.1481C32.3626 7.00089 31.6095 7.31725 31.054 7.87967C30.4985 8.44208 30.1861 9.20462 30.1852 10V13H28.7037C27.1326 13.0018 25.6263 13.6345 24.5154 14.7593C23.4044 15.8842 22.7795 17.4092 22.7778 19V23.5H18.3333V21.25C18.3325 20.4546 18.02 19.6921 17.4645 19.1297C16.9091 18.5673 16.1559 18.2509 15.3704 18.25H7.96296C7.17741 18.2509 6.42428 18.5673 5.86881 19.1297C5.31333 19.6921 5.00088 20.4546 5 21.25V28.75C5.00088 29.5454 5.31333 30.3079 5.86881 30.8703C6.42428 31.4327 7.17741 31.7491 7.96296 31.75H15.3704C16.1559 31.7491 16.9091 31.4327 17.4645 30.8703C18.02 30.3079 18.3325 29.5454 18.3333 28.75V26.5H22.7778V31C22.7795 32.5907 23.4044 34.1158 24.5154 35.2407C25.6263 36.3655 27.1326 36.9982 28.7037 37H30.1852V40C30.1861 40.7954 30.4985 41.5579 31.054 42.1203C31.6095 42.6827 32.3626 42.9991 33.1481 43H42.037C42.8226 42.9991 43.5757 42.6827 44.1312 42.1203C44.6867 41.5579 44.9991 40.7954 45 40V31C44.9991 30.2046 44.6867 29.4421 44.1312 28.8797C43.5757 28.3173 42.8226 28.0009 42.037 28H33.1481C32.3626 28.0009 31.6095 28.3173 31.054 28.8797C30.4985 29.4421 30.1861 30.2046 30.1852 31V34H28.7037C27.9181 33.9991 27.165 33.6827 26.6095 33.1203C26.0541 32.5579 25.7416 31.7954 25.7407 31V19C25.7416 18.2046 26.0541 17.4421 26.6095 16.8797C27.165 16.3173 27.9181 16.0009 28.7037 16H30.1852V19C30.1861 19.7954 30.4985 20.5579 31.054 21.1203C31.6095 21.6827 32.3626 21.9991 33.1481 22ZM15.3704 28.75H7.96296V21.25H15.3704L15.3713 24.982C15.3713 24.988 15.3704 24.994 15.3704 25C15.3704 25.0062 15.3713 25.012 15.3713 25.0182L15.3722 28.75H15.3704ZM33.1481 31H42.037L42.0389 40H33.1481V31ZM33.1481 10H42.037L42.0389 19H33.1481V10Z"
            />
          </svg>
        </button>
        <button
          v-show="foldersMode === 'tree'"
          title="show folders in list mode"
          class="btn p-0.5"
          @click="foldersMode = 'list'"
        >
          <svg
            class="w-5 h-5"
            viewBox="0 0 50 50"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15 11.5263C15 11.0796 15.1756 10.6513 15.4882 10.3354C15.8007 10.0195 16.2246 9.84211 16.6667 9.84211H43.3333C43.7754 9.84211 44.1993 10.0195 44.5118 10.3354C44.8244 10.6513 45 11.0796 45 11.5263C45 11.973 44.8244 12.4014 44.5118 12.7172C44.1993 13.0331 43.7754 13.2105 43.3333 13.2105H16.6667C16.2246 13.2105 15.8007 13.0331 15.4882 12.7172C15.1756 12.4014 15 11.973 15 11.5263ZM43.3333 23.3158H16.6679C16.2259 23.3158 15.802 23.4932 15.4894 23.8091C15.1768 24.1249 15.0013 24.5533 15.0013 25C15.0013 25.4467 15.1768 25.8751 15.4894 26.1909C15.802 26.5068 16.2259 26.6842 16.6679 26.6842H43.3333C43.7754 26.6842 44.1993 26.5068 44.5118 26.1909C44.8244 25.8751 45 25.4467 45 25C45 24.5533 44.8244 24.1249 44.5118 23.8091C44.1993 23.4932 43.7754 23.3158 43.3333 23.3158ZM43.3333 36.7895H16.6679C16.2259 36.7895 15.802 36.9669 15.4894 37.2828C15.1768 37.5986 15.0013 38.027 15.0013 38.4737C15.0013 38.9204 15.1768 39.3488 15.4894 39.6646C15.802 39.9805 16.2259 40.1579 16.6679 40.1579H43.3333C43.7754 40.1579 44.1993 39.9805 44.5118 39.6646C44.8244 39.3488 45 38.9204 45 38.4737C45 38.027 44.8244 37.5986 44.5118 37.2828C44.1993 36.9669 43.7754 36.7895 43.3333 36.7895ZM7.5 9C7.00555 9 6.5222 9.14817 6.11108 9.42576C5.69995 9.70336 5.37952 10.0979 5.1903 10.5595C5.00108 11.0212 4.95157 11.5291 5.04804 12.0192C5.1445 12.5092 5.3826 12.9594 5.73223 13.3127C6.08187 13.666 6.52732 13.9066 7.01228 14.0041C7.49723 14.1016 7.99989 14.0515 8.45671 13.8603C8.91352 13.6691 9.30397 13.3453 9.57867 12.9299C9.85338 12.5144 10 12.026 10 11.5263C10 10.8563 9.73661 10.2137 9.26777 9.73994C8.79893 9.26616 8.16304 9 7.5 9ZM7.5 22.4737C7.00555 22.4737 6.5222 22.6219 6.11108 22.8994C5.69995 23.177 5.37952 23.5716 5.1903 24.0332C5.00108 24.4948 4.95157 25.0028 5.04804 25.4929C5.1445 25.9829 5.3826 26.4331 5.73223 26.7864C6.08187 27.1397 6.52732 27.3803 7.01228 27.4778C7.49723 27.5753 7.99989 27.5252 8.45671 27.334C8.91352 27.1428 9.30397 26.819 9.57867 26.4035C9.85338 25.9881 10 25.4997 10 25C10 24.33 9.73661 23.6874 9.26777 23.2136C8.79893 22.7398 8.16304 22.4737 7.5 22.4737ZM7.5 35.9474C7.00555 35.9474 6.5222 36.0955 6.11108 36.3731C5.69995 36.6507 5.37952 37.0453 5.1903 37.5069C5.00108 37.9685 4.95157 38.4765 5.04804 38.9665C5.1445 39.4566 5.3826 39.9067 5.73223 40.2601C6.08187 40.6134 6.52732 40.854 7.01228 40.9515C7.49723 41.0489 7.99989 40.9989 8.45671 40.8077C8.91352 40.6165 9.30397 40.2927 9.57867 39.8772C9.85338 39.4618 10 38.9733 10 38.4737C10 37.8037 9.73661 37.1611 9.26777 36.6873C8.79893 36.2135 8.16304 35.9474 7.5 35.9474Z"
            />
          </svg>
        </button>
        <h2 class="text-base">
          选择文件夹
        </h2>
      </div>
      <button
        title="save"
        class="px-2 py-1 text-xs text-white bg-green-400 hover:bg-green-600 rounded"
        @click="finishFolders('save')"
      >
        完成
      </button>
    </header>
    <div class="w-full px-4 py-2 bg-white border-b border-gray-200">
      <div class="select-folders pr-1 pb-2 flex flex-wrap border border-gray-300 rounded">
        <div
          v-for="folder of selectFolders"
          :key="folder"
          class="mt-2 ml-2 flex items-center"
        >
          <button
            title="delete folder item"
            class="p-1 text-red-400 bg-gray-200 hover:text-white hover:bg-red-400 rounded-l-sm"
          >
            <svg
              class="w-4 h-4"
              viewBox="0 0 50 50"
              fill="currentColor
                  "
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M41.9231 14.1818H25.6371L20.3846 8.90545C20.0996 8.61753 19.7605 8.38926 19.3871 8.23384C19.0137 8.07842 18.6133 7.99895 18.209 8.00001H8.07692C7.26115 8.00093 6.47906 8.32688 5.90222 8.90633C5.32539 9.48579 5.00092 10.2714 5 11.0909V39.0279C5.00087 39.8159 5.31286 40.5713 5.86753 41.1285C6.42219 41.6857 7.17424 41.9991 7.95865 42H42.094C42.8645 41.9991 43.6031 41.6913 44.1479 41.144C44.6927 40.5968 44.9991 39.8548 45 39.0808V17.2727C44.9991 16.4533 44.6746 15.6676 44.0978 15.0881C43.5209 14.5087 42.7388 14.1827 41.9231 14.1818ZM18.209 11.0909L21.286 14.1818H8.07692V11.0909H18.209ZM41.9231 38.9091H8.07692V17.2727H41.9231V38.9091ZM20.3846 26.5455H29.6154C30.0234 26.5455 30.4147 26.7083 30.7032 26.9981C30.9918 27.2879 31.1538 27.681 31.1538 28.0909C31.1538 28.5008 30.9918 28.8939 30.7032 29.1837C30.4147 29.4735 30.0234 29.6364 29.6154 29.6364H20.3846C19.9766 29.6364 19.5853 29.4735 19.2968 29.1837C19.0082 28.8939 18.8462 28.5008 18.8462 28.0909C18.8462 27.681 19.0082 27.2879 19.2968 26.9981C19.5853 26.7083 19.9766 26.5455 20.3846 26.5455Z"
              />
            </svg>
          </button>
          <button
            title="locate folder item"
            class="p-1 text-xs text-white bg-yellow-400 hover:bg-yellow-600 rounded-r-sm"
          >
            {{ folder }}
          </button>
        </div>
      </div>
    </div>
    <div class="px-4 py-2 flex items-center space-x-2">
      <button
        title="back to parent folder"
        class="p-1 flex items-center  bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800 rounded"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.4246 16.5607C11.6966 16.8419 12.0654 16.9999 12.45 16.9999C12.8345 16.9999 13.2033 16.8419 13.4753 16.5607L19.7 10.1212V24.5C19.7056 29.6699 21.6934 34.6264 25.2273 38.2821C28.7611 41.9378 33.5524 43.9941 38.55 44C38.9346 44 39.3034 43.842 39.5753 43.5607C39.8472 43.2794 40 42.8978 40 42.5C40 42.1022 39.8472 41.7206 39.5753 41.4393C39.3034 41.158 38.9346 41 38.55 41C34.3213 40.995 30.2671 39.2551 27.2769 36.1618C24.2868 33.0685 22.6048 28.8745 22.6 24.5V10.1212L28.8247 16.5607C29.0966 16.842 29.4654 17 29.85 17C30.2346 17 30.6034 16.842 30.8753 16.5607C31.1473 16.2794 31.3 15.8978 31.3 15.5C31.3 15.1022 31.1473 14.7206 30.8753 14.4393L22.1753 5.43931C22.1657 5.42938 22.1552 5.42075 22.1452 5.41119C22.1206 5.387 22.0959 5.36281 22.0696 5.3405C22.0508 5.32438 22.0309 5.3105 22.0115 5.2955C21.9928 5.28106 21.9749 5.26625 21.9556 5.25294C21.9341 5.23813 21.912 5.22519 21.8898 5.21169C21.8712 5.20006 21.8529 5.18787 21.8337 5.17719C21.8121 5.16537 21.7902 5.15544 21.7682 5.14475C21.747 5.13444 21.7262 5.12356 21.7046 5.11419C21.6841 5.10537 21.6633 5.09844 21.6426 5.09075C21.6185 5.08175 21.5948 5.07219 21.5701 5.0645C21.5504 5.05831 21.5302 5.05381 21.5103 5.04856C21.4844 5.04181 21.4588 5.03431 21.4326 5.02887C21.4106 5.02437 21.3883 5.02194 21.3662 5.01856C21.3416 5.01481 21.3173 5.00994 21.2921 5.00731C21.2555 5.00375 21.2189 5.00244 21.1821 5.00169C21.1712 5.0015 21.1609 5 21.15 5C21.1391 5 21.1288 5.0015 21.1179 5.00169C21.0811 5.00244 21.0445 5.00375 21.0079 5.00731C20.9829 5.00994 20.9584 5.01481 20.9339 5.01856C20.9116 5.02194 20.8895 5.02437 20.8674 5.02887C20.8411 5.0345 20.8156 5.04181 20.7898 5.04856C20.7699 5.05381 20.7496 5.05831 20.7297 5.0645C20.7052 5.07219 20.6815 5.08175 20.6573 5.09075C20.6367 5.09825 20.6158 5.10537 20.5954 5.11419C20.5736 5.12356 20.5529 5.13444 20.5319 5.14475C20.51 5.15544 20.4879 5.16537 20.4665 5.17719C20.4471 5.18787 20.4288 5.20006 20.4101 5.21169C20.388 5.22519 20.3659 5.23813 20.3445 5.25294C20.3253 5.26625 20.3072 5.28106 20.2887 5.2955C20.2691 5.3105 20.2492 5.32438 20.2303 5.3405C20.204 5.36281 20.1796 5.387 20.1547 5.41119C20.1448 5.42075 20.1343 5.42938 20.1247 5.43931L11.4246 14.4393C11.1527 14.7206 11 15.1022 11 15.5C11 15.8978 11.1527 16.2794 11.4246 16.5607Z"
          />
        </svg>
        <span class="text-xxs">上一级</span>
      </button>
      <button
        title="back to root folder"
        class="p-1 flex items-center  bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-800 rounded"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M45 12.501C45.0003 11.0892 44.6021 9.70596 43.851 8.51043C43.1 7.3149 42.0268 6.35563 40.7547 5.74296C39.4827 5.13028 38.0635 4.8891 36.6604 5.04714C35.2574 5.20518 33.9274 5.75603 32.8236 6.63633C31.7197 7.51663 30.8868 8.69062 30.4206 10.0233C29.9544 11.3559 29.8739 12.793 30.1883 14.1694C30.5028 15.5458 31.1994 16.8054 32.198 17.8035C33.1966 18.8015 34.4567 19.4974 35.8333 19.8112V20.0003C35.8323 20.884 35.4808 21.7312 34.8559 22.3561C34.231 22.9809 33.3838 23.3324 32.5 23.3334L17.5 23.3338C16.616 23.3338 15.7681 22.9826 15.143 22.3576C14.5179 21.7325 14.1667 20.8847 14.1667 20.0008V19.8112C15.9645 19.4015 17.5484 18.3439 18.6157 16.8404C19.6831 15.337 20.1592 13.493 19.953 11.6608C19.7468 9.82864 18.8728 8.13659 17.498 6.9079C16.1232 5.67922 14.3439 5 12.5 5C10.6561 5 8.8768 5.67922 7.50199 6.9079C6.12718 8.13659 5.25322 9.82864 5.04705 11.6608C4.84088 13.493 5.31694 15.337 6.38431 16.8404C7.45168 18.3439 9.03554 19.4015 10.8333 19.8112V20.0008C10.8333 21.7687 11.5357 23.4643 12.786 24.7144C14.0362 25.9645 15.7319 26.6668 17.5 26.6668L23.3338 26.6666L23.3333 30.1888C21.5355 30.5985 19.9517 31.6561 18.8843 33.1596C17.8169 34.663 17.3409 36.507 17.547 38.3392C17.7532 40.1714 18.6272 41.8634 20.002 43.0921C21.3768 44.3208 23.1561 45 25 45C26.8439 45 28.6232 44.3208 29.998 43.0921C31.3728 41.8634 32.2468 40.1714 32.453 38.3392C32.6592 36.507 32.1831 34.663 31.1157 33.1596C30.0483 31.6561 28.4645 30.5985 26.6667 30.1888L26.6669 26.6666H32.5002C34.2676 26.6645 35.9621 25.9615 37.2118 24.7118C38.4615 23.4621 39.1645 21.7678 39.1665 20.0005V19.8112C40.8222 19.4317 42.3004 18.5023 43.3598 17.1747C44.4192 15.847 44.9974 14.1995 44.9998 12.501H45ZM8.33335 12.501C8.33335 11.677 8.57772 10.8715 9.03556 10.1863C9.4934 9.50117 10.1441 8.96716 10.9055 8.65183C11.6669 8.33649 12.5046 8.25398 13.3129 8.41474C14.1211 8.5755 14.8636 8.9723 15.4463 9.55497C16.029 10.1376 16.4258 10.88 16.5866 11.6882C16.7474 12.4964 16.6649 13.3341 16.3495 14.0954C16.0341 14.8567 15.5001 15.5073 14.8149 15.9651C14.1297 16.4229 13.3241 16.6673 12.5 16.6673C11.3953 16.666 10.3363 16.2267 9.55514 15.4456C8.77401 14.6646 8.33462 13.6056 8.33335 12.501ZM29.1667 37.4992C29.1667 38.3232 28.9223 39.1288 28.4645 39.8139C28.0066 40.499 27.3559 41.0331 26.5945 41.3484C25.8332 41.6637 24.9954 41.7462 24.1871 41.5855C23.3789 41.4247 22.6364 41.0279 22.0537 40.4452C21.471 39.8626 21.0742 39.1202 20.9134 38.312C20.7526 37.5038 20.8351 36.6661 21.1505 35.9049C21.4659 35.1436 21.9999 34.4929 22.6851 34.0351C23.3703 33.5773 24.1759 33.3329 25 33.3329C26.1047 33.3341 27.1638 33.7735 27.9449 34.5545C28.7261 35.3356 29.1655 36.3946 29.1667 37.4992ZM37.5 16.6673C36.6759 16.6673 35.8703 16.4229 35.1851 15.9651C34.4999 15.5073 33.9659 14.8567 33.6505 14.0954C33.3351 13.3341 33.2526 12.4964 33.4134 11.6882C33.5742 10.88 33.971 10.1376 34.5537 9.55497C35.1364 8.9723 35.8789 8.5755 36.6871 8.41474C37.4954 8.25398 38.3332 8.33649 39.0945 8.65183C39.8559 8.96716 40.5066 9.50117 40.9645 10.1863C41.4223 10.8715 41.6667 11.677 41.6667 12.501C41.6654 13.6056 41.226 14.6646 40.4449 15.4456C39.6638 16.2267 38.6047 16.666 37.5 16.6673Z"
          />
        </svg>
        <span class="text-xxs">根目录</span>
      </button>
    </div>
    <div class="flex-grow">
      content
    </div>
  </div>
</template>
<script>
import { ref } from 'vue';

export default {
  props: {
    selectFolders: {
      type: Array,
      default() {
        return [];
      },
    },
  },
  emits: ['cancel-folders', 'save-folders'],
  setup(props, context) {
    const foldersMode = ref('list'); // list, tree

    const finishFolders = (value) => {
      if (value === 'cancel') {
        context.emit('cancel-folders');
      } else {
        context.emit('save-folders', ['folder1', 'folder2']);
      }
    };
    return {
      foldersMode,
      finishFolders,
    };
  },
};
</script>
<style lang="scss">
.text-xxs {
  font-size: 10px;
}

.h-center {
  @apply flex justify-center items-center;
}

.btn {
  @apply text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded;
}

.input-style {
  @apply w-full p-1 border border-gray-300 rounded;
}
.select-folders {
  min-height: 2rem;
  max-height: 5rem;
  overflow-y: overlay;
  &::-webkit-scrollbar {
    width: 5px;
  }
  &::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: #9ca3af;
    // border: 3px solid transparent;
    // background-clip: padding-box;
  }
  &::-webkit-scrollbar-thumb:hover {
    background-color: #4b5563;
  }
}
</style>
