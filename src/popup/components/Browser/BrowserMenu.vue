<template>
  <div class="w-full flex justify-between items-center space-x-2">
    <div
      v-show="browserType === 'all' && browserMode === 'grid'"
      class="breadcrumb flex-grow flex items-center space-x-2"
    >
      <div class="flex-shrink-0 flex items-center space-x-0.5">
        <div
          v-for="(node, index) of breadcrumb"
          :key="node.id"
          class="flex items-center"
        >
          <button
            title="breadcrumb navigation item"
            class="btn p-1 text-gray-600 space-x-0.5"
            :disabled="index === breadcrumb.length - 1"
            @click="$emit('set-current-node', node.id)"
          >
            <svg
              v-if="index !== breadcrumb.length - 1"
              class="w-4 h-4"
              viewBox="0 0 50 50"
              fill="#FBBF24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M41 14H25.1212L20 8.87901C19.7222 8.5995 19.3916 8.37788 19.0276 8.227C18.6635 8.07612 18.2731 7.99896 17.879 8.00001H8C7.20459 8.0008 6.44199 8.31713 5.87956 8.87957C5.31712 9.442 5.00079 10.2046 5 11V38.1157C5.00104 38.8806 5.30544 39.6138 5.84641 40.1545C6.38738 40.6952 7.12075 40.9993 7.88562 41H41.1669C41.918 40.999 42.638 40.7002 43.1691 40.1691C43.7002 39.638 43.999 38.918 44 38.1669V17.0002C43.9992 16.2048 43.6829 15.4422 43.1204 14.8798C42.558 14.3173 41.7954 14.001 41 14.0002V14ZM8 11H17.879L20.879 14H8V11Z"
              />
            </svg>
            <svg
              v-if="index === breadcrumb.length - 1"
              class="w-4 h-4"
              viewBox="0 0 50 50"
              fill="#FBBF24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M43.4674 21.1866C43.2053 20.8197 42.861 20.5209 42.4626 20.3147C42.0643 20.1084 41.6233 20.0006 41.1758 20H38.8982V17.1429C38.8974 16.3854 38.5995 15.6591 38.0699 15.1235C37.5403 14.5879 36.8223 14.2866 36.0734 14.2857H23.8324L18.9361 10.5714C18.4464 10.2017 17.852 10.0013 17.241 10H7.82485C7.07591 10.0009 6.35789 10.3021 5.82831 10.8378C5.29873 11.3734 5.00084 12.0996 5 12.8571V38.5714C5 38.5805 5.00124 38.5893 5.00141 38.5984C5.00177 38.6186 5.00318 38.6384 5.00424 38.6586C5.00636 38.6925 5.00936 38.7263 5.01359 38.7596C5.01595 38.7777 5.01871 38.7958 5.02189 38.8137C5.02807 38.8504 5.03566 38.8863 5.04449 38.9218C5.0482 38.9366 5.05155 38.9514 5.05579 38.9661C5.06797 39.0088 5.0821 39.0504 5.09781 39.0912C5.10081 39.0987 5.10311 39.1066 5.10611 39.1141C5.12628 39.164 5.14927 39.2126 5.17496 39.2598C5.17779 39.265 5.18114 39.2698 5.18397 39.2748C5.20657 39.3153 5.23105 39.3543 5.25741 39.392C5.26077 39.3968 5.26324 39.402 5.2666 39.4068C5.27277 39.4155 5.28019 39.4229 5.28672 39.4316C5.341 39.5044 5.40214 39.5718 5.46928 39.6327C5.48058 39.6429 5.49135 39.6537 5.50282 39.6636C5.54204 39.6973 5.58307 39.7287 5.62571 39.7579L5.62924 39.76C5.67115 39.7881 5.71453 39.8139 5.75918 39.8373C5.77048 39.8432 5.78213 39.8484 5.79361 39.8541C5.84237 39.8782 5.89248 39.8994 5.94368 39.9177C5.97922 39.9303 6.01536 39.9415 6.05208 39.9513C6.06691 39.9554 6.08174 39.9595 6.09657 39.9629C6.13435 39.9716 6.17284 39.9782 6.21169 39.9839C6.22581 39.9859 6.2394 39.9888 6.25353 39.9904C6.30628 39.9966 6.35932 39.9998 6.41243 40H37.4858C37.7823 40 38.0712 39.9057 38.3117 39.7304C38.5522 39.555 38.7321 39.3077 38.8258 39.0232L43.8559 23.7607C43.9968 23.3311 44.0351 22.8739 43.9676 22.4264C43.9001 21.979 43.7287 21.5541 43.4674 21.1866ZM17.241 12.8571L22.1373 16.5714C22.627 16.9412 23.2213 17.1416 23.8324 17.1429H36.0734V20H13.0801C12.4871 19.9994 11.909 20.1879 11.4278 20.5386C10.9467 20.8892 10.5871 21.3844 10.4001 21.9536L7.82485 29.7682V12.8571H17.241Z"
              />
            </svg>
            <span class="text-xs">{{ node.title || 'root' }}</span>
          </button>
          <span
            v-if="index < breadcrumb.length - 1"
            class="p-0.5 font-bold text-gray-400"
          >/</span>
        </div>
      </div>
    </div>
    <div
      v-show="browserType === 'all' && browserMode === 'tree'"
      class="flex-grow flex items-center space-x-2"
    >
      <button
        title="reset tree layout"
        class="btn p-1 text-gray-400 hover:text-gray-800"
        @click="$emit('reset-tree-layout')"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M25 5C21.0444 5 17.1776 6.17298 13.8886 8.37061C10.5996 10.5682 8.03617 13.6918 6.52242 17.3463C5.00867 21.0008 4.6126 25.0222 5.3843 28.9018C6.15601 32.7814 8.06082 36.3451 10.8579 39.1421C13.6549 41.9392 17.2186 43.844 21.0982 44.6157C24.9778 45.3874 28.9991 44.9913 32.6537 43.4776C36.3082 41.9638 39.4318 39.4004 41.6294 36.1114C43.827 32.8224 45 28.9556 45 25C44.994 19.6975 42.8849 14.6139 39.1355 10.8645C35.3861 7.11507 30.3025 5.00601 25 5ZM25 41.9231C21.6529 41.9231 18.381 40.9305 15.598 39.071C12.8151 37.2115 10.646 34.5685 9.36512 31.4762C8.08426 28.3839 7.74912 24.9812 8.4021 21.6985C9.05508 18.4157 10.6669 15.4003 13.0336 13.0336C15.4003 10.6668 18.4157 9.05508 21.6985 8.40209C24.9812 7.74911 28.3839 8.08425 31.4762 9.36511C34.5685 10.646 37.2115 12.8151 39.071 15.598C40.9306 18.381 41.9231 21.6529 41.9231 25C41.918 29.4867 40.1334 33.7882 36.9608 36.9608C33.7882 40.1334 29.4867 41.918 25 41.9231ZM33.0287 14.9127L21.0987 20.336C20.7496 20.4946 20.4723 20.7778 20.3212 21.1302L15.426 32.5529C15.3049 32.8355 15.2713 33.1479 15.3294 33.4498C15.3876 33.7517 15.5349 34.0292 15.7523 34.2466C15.9696 34.464 16.2472 34.6113 16.5491 34.6694C16.851 34.7276 17.1634 34.694 17.446 34.5729L28.8685 29.6775C29.222 29.5261 29.5059 29.2477 29.6644 28.8973L35.0671 16.9469C35.196 16.6618 35.2349 16.3442 35.1785 16.0364C35.1222 15.7286 34.9734 15.4453 34.7519 15.2243C34.5305 15.0033 34.2468 14.8551 33.939 14.7994C33.6311 14.7437 33.3135 14.7832 33.0287 14.9127ZM27.1069 27.085L19.7692 30.2298L22.9144 22.8904L30.5785 19.4063L27.1069 27.085Z"
          />
        </svg>
      </button>
      <button
        title="back to parent folder"
        class="btn p-1 bg-gray-100 text-gray-600 hover:text-gray-800 space-x-1"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.4246 16.5607C11.6966 16.8419 12.0654 16.9999 12.45 16.9999C12.8345 16.9999 13.2033 16.8419 13.4753 16.5607L19.7 10.1212V24.5C19.7056 29.6699 21.6934 34.6264 25.2273 38.2821C28.7611 41.9378 33.5524 43.9941 38.55 44C38.9346 44 39.3034 43.842 39.5753 43.5607C39.8472 43.2794 40 42.8978 40 42.5C40 42.1022 39.8472 41.7206 39.5753 41.4393C39.3034 41.158 38.9346 41 38.55 41C34.3213 40.995 30.2671 39.2551 27.2769 36.1618C24.2868 33.0685 22.6048 28.8745 22.6 24.5V10.1212L28.8247 16.5607C29.0966 16.842 29.4654 17 29.85 17C30.2346 17 30.6034 16.842 30.8753 16.5607C31.1473 16.2794 31.3 15.8978 31.3 15.5C31.3 15.1022 31.1473 14.7206 30.8753 14.4393L22.1753 5.43931C22.1657 5.42938 22.1552 5.42075 22.1452 5.41119C22.1206 5.387 22.0959 5.36281 22.0696 5.3405C22.0508 5.32438 22.0309 5.3105 22.0115 5.2955C21.9928 5.28106 21.9749 5.26625 21.9556 5.25294C21.9341 5.23813 21.912 5.22519 21.8898 5.21169C21.8712 5.20006 21.8529 5.18787 21.8337 5.17719C21.8121 5.16537 21.7902 5.15544 21.7682 5.14475C21.747 5.13444 21.7262 5.12356 21.7046 5.11419C21.6841 5.10537 21.6633 5.09844 21.6426 5.09075C21.6185 5.08175 21.5948 5.07219 21.5701 5.0645C21.5504 5.05831 21.5302 5.05381 21.5103 5.04856C21.4844 5.04181 21.4588 5.03431 21.4326 5.02887C21.4106 5.02437 21.3883 5.02194 21.3662 5.01856C21.3416 5.01481 21.3173 5.00994 21.2921 5.00731C21.2555 5.00375 21.2189 5.00244 21.1821 5.00169C21.1712 5.0015 21.1609 5 21.15 5C21.1391 5 21.1288 5.0015 21.1179 5.00169C21.0811 5.00244 21.0445 5.00375 21.0079 5.00731C20.9829 5.00994 20.9584 5.01481 20.9339 5.01856C20.9116 5.02194 20.8895 5.02437 20.8674 5.02887C20.8411 5.0345 20.8156 5.04181 20.7898 5.04856C20.7699 5.05381 20.7496 5.05831 20.7297 5.0645C20.7052 5.07219 20.6815 5.08175 20.6573 5.09075C20.6367 5.09825 20.6158 5.10537 20.5954 5.11419C20.5736 5.12356 20.5529 5.13444 20.5319 5.14475C20.51 5.15544 20.4879 5.16537 20.4665 5.17719C20.4471 5.18787 20.4288 5.20006 20.4101 5.21169C20.388 5.22519 20.3659 5.23813 20.3445 5.25294C20.3253 5.26625 20.3072 5.28106 20.2887 5.2955C20.2691 5.3105 20.2492 5.32438 20.2303 5.3405C20.204 5.36281 20.1796 5.387 20.1547 5.41119C20.1448 5.42075 20.1343 5.42938 20.1247 5.43931L11.4246 14.4393C11.1527 14.7206 11 15.1022 11 15.5C11 15.8978 11.1527 16.2794 11.4246 16.5607Z"
          />
        </svg>
        <span
          class="flex-shrink-0 text-xs"
          @click="$emit('set-current-node', 'parent')"
        >上一级</span>
      </button>
      <button
        title="back to root folder"
        class="btn p-1 bg-gray-100 text-gray-600 hover:text-gray-800 space-x-1"
        @click="$emit('set-current-node', 'root')"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M45 12.501C45.0003 11.0892 44.6021 9.70596 43.851 8.51043C43.1 7.3149 42.0268 6.35563 40.7547 5.74296C39.4827 5.13028 38.0635 4.8891 36.6604 5.04714C35.2574 5.20518 33.9274 5.75603 32.8236 6.63633C31.7197 7.51663 30.8868 8.69062 30.4206 10.0233C29.9544 11.3559 29.8739 12.793 30.1883 14.1694C30.5028 15.5458 31.1994 16.8054 32.198 17.8035C33.1966 18.8015 34.4567 19.4974 35.8333 19.8112V20.0003C35.8323 20.884 35.4808 21.7312 34.8559 22.3561C34.231 22.9809 33.3838 23.3324 32.5 23.3334L17.5 23.3338C16.616 23.3338 15.7681 22.9826 15.143 22.3576C14.5179 21.7325 14.1667 20.8847 14.1667 20.0008V19.8112C15.9645 19.4015 17.5484 18.3439 18.6157 16.8404C19.6831 15.337 20.1592 13.493 19.953 11.6608C19.7468 9.82864 18.8728 8.13659 17.498 6.9079C16.1232 5.67922 14.3439 5 12.5 5C10.6561 5 8.8768 5.67922 7.50199 6.9079C6.12718 8.13659 5.25322 9.82864 5.04705 11.6608C4.84088 13.493 5.31694 15.337 6.38431 16.8404C7.45168 18.3439 9.03554 19.4015 10.8333 19.8112V20.0008C10.8333 21.7687 11.5357 23.4643 12.786 24.7144C14.0362 25.9645 15.7319 26.6668 17.5 26.6668L23.3338 26.6666L23.3333 30.1888C21.5355 30.5985 19.9517 31.6561 18.8843 33.1596C17.8169 34.663 17.3409 36.507 17.547 38.3392C17.7532 40.1714 18.6272 41.8634 20.002 43.0921C21.3768 44.3208 23.1561 45 25 45C26.8439 45 28.6232 44.3208 29.998 43.0921C31.3728 41.8634 32.2468 40.1714 32.453 38.3392C32.6592 36.507 32.1831 34.663 31.1157 33.1596C30.0483 31.6561 28.4645 30.5985 26.6667 30.1888L26.6669 26.6666H32.5002C34.2676 26.6645 35.9621 25.9615 37.2118 24.7118C38.4615 23.4621 39.1645 21.7678 39.1665 20.0005V19.8112C40.8222 19.4317 42.3004 18.5023 43.3598 17.1747C44.4192 15.847 44.9974 14.1995 44.9998 12.501H45ZM8.33335 12.501C8.33335 11.677 8.57772 10.8715 9.03556 10.1863C9.4934 9.50117 10.1441 8.96716 10.9055 8.65183C11.6669 8.33649 12.5046 8.25398 13.3129 8.41474C14.1211 8.5755 14.8636 8.9723 15.4463 9.55497C16.029 10.1376 16.4258 10.88 16.5866 11.6882C16.7474 12.4964 16.6649 13.3341 16.3495 14.0954C16.0341 14.8567 15.5001 15.5073 14.8149 15.9651C14.1297 16.4229 13.3241 16.6673 12.5 16.6673C11.3953 16.666 10.3363 16.2267 9.55514 15.4456C8.77401 14.6646 8.33462 13.6056 8.33335 12.501ZM29.1667 37.4992C29.1667 38.3232 28.9223 39.1288 28.4645 39.8139C28.0066 40.499 27.3559 41.0331 26.5945 41.3484C25.8332 41.6637 24.9954 41.7462 24.1871 41.5855C23.3789 41.4247 22.6364 41.0279 22.0537 40.4452C21.471 39.8626 21.0742 39.1202 20.9134 38.312C20.7526 37.5038 20.8351 36.6661 21.1505 35.9049C21.4659 35.1436 21.9999 34.4929 22.6851 34.0351C23.3703 33.5773 24.1759 33.3329 25 33.3329C26.1047 33.3341 27.1638 33.7735 27.9449 34.5545C28.7261 35.3356 29.1655 36.3946 29.1667 37.4992ZM37.5 16.6673C36.6759 16.6673 35.8703 16.4229 35.1851 15.9651C34.4999 15.5073 33.9659 14.8567 33.6505 14.0954C33.3351 13.3341 33.2526 12.4964 33.4134 11.6882C33.5742 10.88 33.971 10.1376 34.5537 9.55497C35.1364 8.9723 35.8789 8.5755 36.6871 8.41474C37.4954 8.25398 38.3332 8.33649 39.0945 8.65183C39.8559 8.96716 40.5066 9.50117 40.9645 10.1863C41.4223 10.8715 41.6667 11.677 41.6667 12.501C41.6654 13.6056 41.226 14.6646 40.4449 15.4456C39.6638 16.2267 38.6047 16.666 37.5 16.6673Z"
          />
        </svg>
        <span class="flex-shrink-0 text-xs">根目录</span>
      </button>
    </div>
    <div
      v-show="browserType === 'star' || browserMode !== 'tree'"
      class="flex items-center space-x-2"
    >
      <button
        title="fold all folders"
        class="btn p-1 text-gray-400 hover:text-gray-800"
        @click="$emit('fold-all')"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11 24.5C11 24.8448 11.1273 25.1754 11.3539 25.4192C11.5805 25.663 11.8879 25.8 12.2083 25.8H38.7917C39.1121 25.8 39.4195 25.663 39.6461 25.4192C39.8727 25.1754 40 24.8448 40 24.5C40 24.1552 39.8727 23.8246 39.6461 23.5808C39.4195 23.337 39.1121 23.2 38.7917 23.2H12.2083C11.8879 23.2 11.5805 23.337 11.3539 23.5808C11.1273 23.8246 11 24.1552 11 24.5ZM26.3544 20.2193C26.3463 20.228 26.3372 20.2355 26.3289 20.2441C26.3085 20.2648 26.2881 20.2857 26.2664 20.3049C26.2504 20.319 26.2335 20.3315 26.2168 20.3447C26.2017 20.3567 26.1871 20.3694 26.1715 20.3806C26.153 20.3939 26.1339 20.4055 26.115 20.4175C26.0999 20.4271 26.0853 20.4373 26.0699 20.4461C26.0512 20.457 26.032 20.4661 26.0128 20.4758C25.9962 20.4843 25.9797 20.4932 25.9626 20.5009C25.9444 20.509 25.9256 20.5155 25.9071 20.5226C25.8885 20.53 25.8701 20.5376 25.8509 20.5438C25.8326 20.5498 25.8139 20.5542 25.7953 20.5592C25.7757 20.5646 25.7562 20.5706 25.7362 20.5748C25.7149 20.5794 25.6933 20.582 25.672 20.5854C25.6544 20.588 25.6371 20.5915 25.6192 20.5935C25.5399 20.6019 25.46 20.6019 25.3807 20.5935C25.3629 20.5915 25.3456 20.588 25.328 20.5854C25.3067 20.5821 25.2851 20.5794 25.2639 20.5748C25.2438 20.5706 25.2243 20.5646 25.2047 20.5592C25.1861 20.5543 25.1674 20.5498 25.1491 20.5438C25.1299 20.5376 25.1115 20.53 25.0929 20.5226C25.0744 20.5155 25.0556 20.509 25.0374 20.5009C25.0203 20.4932 25.0038 20.4843 24.9872 20.4758C24.968 20.4661 24.9488 20.457 24.9301 20.4461C24.9147 20.4373 24.8999 20.4271 24.885 20.4175C24.8661 20.4055 24.847 20.3939 24.8286 20.3806C24.8129 20.3694 24.7984 20.3567 24.7832 20.3449C24.7665 20.3315 24.7496 20.319 24.7336 20.3049C24.7119 20.2857 24.6915 20.2648 24.6711 20.2441C24.6628 20.2357 24.6537 20.228 24.6454 20.2193L19.8121 15.0193C19.5855 14.7754 19.4582 14.4447 19.4582 14.0999C19.4582 13.7551 19.5855 13.4245 19.8121 13.1807C20.0388 12.9369 20.3462 12.7999 20.6666 12.7999C20.9871 12.7999 21.2945 12.9369 21.5211 13.1807L24.2917 16.1615V6.3C24.2917 5.95522 24.419 5.62456 24.6456 5.38076C24.8722 5.13696 25.1795 5 25.5 5C25.8205 5 26.1278 5.13696 26.3544 5.38076C26.581 5.62456 26.7083 5.95522 26.7083 6.3V16.1615L29.4789 13.1807C29.5911 13.06 29.7243 12.9643 29.8709 12.8989C30.0175 12.8336 30.1746 12.8 30.3333 12.8C30.6538 12.8 30.9612 12.9369 31.1878 13.1807C31.3 13.3015 31.389 13.4448 31.4497 13.6025C31.5104 13.7602 31.5417 13.9293 31.5417 14.1C31.5417 14.4448 31.4144 14.7755 31.1878 15.0193L26.3544 20.2193ZM24.6456 28.7807C24.6536 28.7721 24.6623 28.7646 24.6706 28.7564C24.691 28.7352 24.712 28.7147 24.7336 28.6951C24.7493 28.6811 24.7659 28.6691 24.7822 28.6561C24.7977 28.6437 24.8126 28.6307 24.8288 28.6192C24.8466 28.6064 24.865 28.5952 24.8834 28.5835C24.899 28.5734 24.9143 28.5628 24.9303 28.5537C24.9484 28.5433 24.9665 28.5347 24.9848 28.5254C25.0025 28.5165 25.0198 28.5069 25.0378 28.499C25.0549 28.4913 25.0722 28.4853 25.0895 28.4786C25.1096 28.4708 25.1293 28.4626 25.1499 28.4559C25.1663 28.4505 25.1831 28.4466 25.1997 28.4421C25.2213 28.4362 25.2426 28.4297 25.2645 28.425C25.2828 28.4211 25.3014 28.419 25.32 28.4161C25.3403 28.4128 25.3607 28.4086 25.3816 28.4063C25.4121 28.4035 25.4427 28.4019 25.4733 28.4015C25.4823 28.4013 25.4909 28.4 25.5 28.4C25.5091 28.4 25.5178 28.4013 25.5267 28.4015C25.5573 28.4019 25.5879 28.4035 25.6184 28.4063C25.6393 28.4086 25.6597 28.4128 25.68 28.4161C25.6986 28.419 25.7172 28.4211 25.7355 28.425C25.7574 28.4299 25.7787 28.4362 25.8001 28.4421C25.8167 28.4466 25.8337 28.4505 25.8501 28.4559C25.8707 28.4626 25.8904 28.4708 25.9105 28.4786C25.9277 28.4851 25.9453 28.4913 25.9622 28.499C25.9803 28.5071 25.9975 28.5165 26.0151 28.5254C26.0333 28.5347 26.0518 28.5433 26.0696 28.5537C26.0857 28.5628 26.1008 28.5734 26.1166 28.5835C26.135 28.5952 26.1534 28.6064 26.1712 28.6192C26.1874 28.6307 26.2023 28.6436 26.2177 28.6561C26.2341 28.6691 26.2507 28.6811 26.2664 28.6951C26.2883 28.7146 26.3088 28.7354 26.3294 28.7564C26.3377 28.7646 26.3464 28.7721 26.3544 28.7807L31.1878 33.9807C31.3 34.1015 31.389 34.2448 31.4497 34.4025C31.5104 34.5602 31.5417 34.7293 31.5417 34.9C31.5417 35.0707 31.5104 35.2398 31.4497 35.3975C31.389 35.5552 31.3 35.6985 31.1878 35.8193C31.0756 35.94 30.9424 36.0357 30.7958 36.1011C30.6491 36.1664 30.492 36.2 30.3333 36.2C30.1746 36.2 30.0175 36.1664 29.8709 36.1011C29.7243 36.0357 29.5911 35.94 29.4789 35.8193L26.7083 32.8385V42.7C26.7083 43.0448 26.581 43.3754 26.3544 43.6192C26.1278 43.863 25.8205 44 25.5 44C25.1795 44 24.8722 43.863 24.6456 43.6192C24.419 43.3754 24.2917 43.0448 24.2917 42.7V32.8385L21.5211 35.8193C21.2945 36.0631 20.9871 36.2 20.6667 36.2C20.3462 36.2 20.0388 36.0631 19.8122 35.8193C19.5856 35.5755 19.4583 35.2448 19.4583 34.9C19.4583 34.5552 19.5856 34.2245 19.8122 33.9807L24.6456 28.7807Z"
          />
        </svg>
      </button>
      <button
        title="unfold all folders"
        class="btn p-1 text-gray-400 hover:text-gray-800"
        @click="$emit('unfold-all')"
      >
        <svg
          class="w-4 h-4"
          viewBox="0 0 50 50"
          fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 25.0001C9 25.3537 9.14047 25.6929 9.39052 25.9429C9.64057 26.193 9.97971 26.3334 10.3333 26.3334H39.6667C40.0203 26.3334 40.3594 26.193 40.6095 25.9429C40.8595 25.6929 41 25.3537 41 25.0001C41 24.6465 40.8595 24.3073 40.6095 24.0573C40.3594 23.8072 40.0203 23.6668 39.6667 23.6668H10.3333C9.97971 23.6668 9.64057 23.8072 9.39052 24.0573C9.14047 24.3073 9 24.6465 9 25.0001ZM29.3905 12.6095L26.3333 9.55235V19.6667C26.3333 20.0204 26.1929 20.3595 25.9428 20.6095C25.6928 20.8596 25.3536 21.0001 25 21.0001C24.6464 21.0001 24.3072 20.8596 24.0572 20.6095C23.8071 20.3595 23.6667 20.0204 23.6667 19.6667V9.55235L20.6095 12.6095C20.3594 12.8596 20.0203 13.0001 19.6667 13.0001C19.313 13.0001 18.9739 12.8596 18.7238 12.6095C18.4738 12.3595 18.3333 12.0203 18.3333 11.6667C18.3333 11.3131 18.4738 10.9739 18.7238 10.7239L24.0572 5.3905C24.066 5.38167 24.0757 5.374 24.0848 5.3655C24.1073 5.34377 24.1305 5.32281 24.1543 5.30267C24.1717 5.28833 24.19 5.276 24.208 5.26267C24.225 5.25 24.2415 5.23667 24.2593 5.22483C24.279 5.21167 24.2993 5.20017 24.3197 5.18817C24.3368 5.17783 24.3537 5.167 24.3713 5.15767C24.3913 5.147 24.4113 5.13817 24.4315 5.12867C24.451 5.1195 24.4702 5.10967 24.49 5.1015C24.5088 5.09367 24.528 5.0875 24.547 5.08067C24.5692 5.07267 24.591 5.06417 24.6137 5.05733C24.6318 5.05183 24.6503 5.04783 24.6687 5.04317C24.6925 5.03717 24.716 5.0305 24.7402 5.02567C24.7603 5.02167 24.7808 5.0195 24.8013 5.0165C24.8238 5.01317 24.8463 5.00883 24.8693 5.0065C24.903 5.00358 24.9367 5.00191 24.9705 5.0015C24.9805 5.00133 24.99 5 25 5C25.01 5 25.0197 5.00133 25.0295 5.0015C25.0633 5.00191 25.097 5.00358 25.1307 5.0065C25.1537 5.00883 25.1762 5.01317 25.1987 5.0165C25.2192 5.0195 25.2397 5.02167 25.2598 5.02567C25.284 5.03067 25.3075 5.03717 25.3312 5.04317C25.3495 5.04783 25.3682 5.05183 25.3863 5.05733C25.409 5.06417 25.4308 5.07267 25.453 5.08067C25.472 5.08733 25.4913 5.09367 25.51 5.1015C25.53 5.10983 25.549 5.1195 25.5683 5.12867C25.5885 5.13817 25.6088 5.147 25.6285 5.15767C25.6463 5.167 25.663 5.17783 25.6803 5.18817C25.7007 5.20017 25.721 5.21167 25.7407 5.22483C25.7585 5.23667 25.775 5.24983 25.792 5.26267C25.81 5.276 25.8283 5.28833 25.8457 5.30267C25.8698 5.32267 25.8925 5.344 25.9152 5.3655C25.9243 5.374 25.934 5.38167 25.9428 5.3905L31.2762 10.7239C31.5262 10.9739 31.6667 11.3131 31.6667 11.6667C31.6667 12.0203 31.5262 12.3595 31.2762 12.6095C31.0261 12.8596 30.687 13.0001 30.3333 13.0001C29.9797 13.0001 29.6406 12.8596 29.3905 12.6095ZM20.6095 37.3907L23.6667 40.4478V30.3335C23.6667 29.9798 23.8071 29.6407 24.0572 29.3906C24.3072 29.1406 24.6464 29.0001 25 29.0001C25.3536 29.0001 25.6928 29.1406 25.9428 29.3906C26.1929 29.6407 26.3333 29.9798 26.3333 30.3335V40.4478L29.3905 37.3907C29.6406 37.1406 29.9797 37.0001 30.3333 37.0001C30.687 37.0001 31.0261 37.1406 31.2762 37.3907C31.5262 37.6407 31.6667 37.9799 31.6667 38.3335C31.6667 38.6871 31.5262 39.0263 31.2762 39.2763L25.9428 44.6097C25.9338 44.6187 25.9238 44.6264 25.9147 44.6352C25.8922 44.6564 25.8697 44.6779 25.8457 44.6975C25.828 44.712 25.8093 44.7249 25.791 44.7384C25.7743 44.7507 25.7582 44.7637 25.741 44.7752C25.7205 44.7889 25.6995 44.8007 25.6787 44.813C25.662 44.8229 25.6458 44.8334 25.6288 44.8424C25.6082 44.8535 25.587 44.8629 25.5658 44.8729C25.5475 44.8815 25.5293 44.8907 25.5105 44.8985C25.4903 44.9069 25.4697 44.9135 25.4492 44.9209C25.4287 44.9284 25.4083 44.9362 25.3872 44.9425C25.367 44.9487 25.3463 44.9534 25.3258 44.9584C25.3042 44.9639 25.2827 44.97 25.2607 44.9744C25.2372 44.979 25.2133 44.9817 25.1898 44.9852C25.1703 44.9879 25.1513 44.9915 25.1315 44.9935C25.044 45.0022 24.9558 45.0022 24.8683 44.9935C24.8487 44.9915 24.8297 44.9879 24.8102 44.9852C24.7867 44.9819 24.7628 44.979 24.7395 44.9744C24.7173 44.97 24.6958 44.9639 24.6742 44.9584C24.6537 44.9534 24.633 44.9487 24.6128 44.9427C24.5917 44.9362 24.5713 44.9284 24.5508 44.921C24.5303 44.9135 24.5097 44.9069 24.4895 44.8985C24.4707 44.8907 24.4525 44.8815 24.4342 44.8729C24.413 44.8629 24.3918 44.8535 24.3712 44.8424C24.3542 44.8334 24.3378 44.8229 24.3213 44.813C24.3005 44.8007 24.2795 44.7889 24.2592 44.7752C24.2418 44.7637 24.2258 44.7507 24.209 44.7385C24.1907 44.7249 24.172 44.712 24.1543 44.6975C24.1303 44.6779 24.1078 44.6564 24.0853 44.6352C24.0762 44.6265 24.0662 44.6187 24.057 44.6097L18.7237 39.2763C18.4736 39.0263 18.3331 38.6871 18.3332 38.3334C18.3332 37.9798 18.4737 37.6406 18.7237 37.3906C18.9738 37.1405 19.313 37 19.6666 37.0001C20.0203 37.0001 20.3594 37.1406 20.6095 37.3907Z"
          />
        </svg>
      </button>
    </div>
    <button
      title="show pin list"
      class="h-center px-1 py-0.5 text-blue-400 hover:text-white hover:bg-blue-400 border-2 border-blue-400 rounded space-x-0.5"
      @click="$emit('change-browser-type', 'pin')"
    >
      <svg
        class="w-4 h-4"
        viewBox="0 0 50 50"
        fill="currentColor"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M43.1421 21.1207L32.4296 31.8433C33.2635 34.1663 33.6093 38.0521 30.0154 42.833C29.7637 43.1678 29.4432 43.4446 29.0754 43.6446C28.7077 43.8447 28.3013 43.9634 27.8837 43.9927C27.815 43.9976 27.7465 44 27.678 44C27.2932 44 26.9121 43.924 26.5566 43.7766C26.2011 43.6291 25.8781 43.4129 25.6061 43.1404L16.7852 34.3114L10.4992 40.6032C10.3633 40.7393 10.2018 40.8473 10.0242 40.9209C9.84652 40.9946 9.65611 41.0325 9.46381 41.0325C9.27151 41.0325 9.0811 40.9946 8.90344 40.9209C8.72578 40.8473 8.56435 40.7393 8.42838 40.6032C8.29241 40.4671 8.18454 40.3055 8.11096 40.1277C8.03737 39.9499 7.99949 39.7593 7.99949 39.5668C7.99949 39.3743 8.03737 39.1838 8.11096 39.0059C8.18454 38.8281 8.29241 38.6665 8.42838 38.5304L14.7144 32.2386L5.85728 23.3734C5.56668 23.0822 5.34054 22.733 5.19358 22.3486C5.04661 21.9642 4.98211 21.5531 5.00425 21.1421C5.0264 20.7311 5.13471 20.3294 5.32213 19.963C5.50955 19.5967 5.7719 19.2739 6.09212 19.0157C10.746 15.2578 15.2003 15.9979 17.15 16.61L27.8929 5.8572V5.85701C28.4426 5.3082 29.1873 5 29.9638 5C30.7402 5 31.4849 5.3082 32.0346 5.85701L43.1423 16.9753C43.4142 17.2475 43.6299 17.5707 43.7771 17.9263C43.9243 18.2819 44 18.6631 44 19.048C44 19.433 43.9242 19.8141 43.777 20.1698C43.6298 20.5254 43.4141 20.8485 43.1421 21.1207Z"
        />
      </svg>
      <span class="text-sm font-bold">{{ pinNodesId.length }}</span>
    </button>
  </div>
</template>
<script>
import { ref, watch } from 'vue';

export default {
  props: {
    browserType: {
      type: String,
      default: 'all',
    },
    browserMode: {
      type: String,
      default: 'grid',
    },
    currentNodeId: {
      type: String,
      default: '0',
    },
    pinNodesId: {
      type: Array,
      default() {
        return [];
      },
    },
  },
  emits: ['change-browser-type', 'set-current-node', 'reset-tree-layout', 'back-to-parent', 'back-to-root', 'fold-all', 'unfold-all'],
  setup(props, context) {
    const breadcrumb = ref([]);

    let nodesArr = [];
    const getBreadcrumb = async (nodeId) => {
      const result = await chrome.bookmarks.get(nodeId);
      const node = result[0];
      nodesArr.unshift(node);
      if (node.parentId) {
        await getBreadcrumb(node.parentId);
      }
    };

    watch(
      () => props.currentNodeId,
      async (newValue, oldValue) => {
        await getBreadcrumb(props.currentNodeId);
        breadcrumb.value = nodesArr;
        nodesArr = [];
      },
      {
        immediate: true,
      },
    );

    return {
      breadcrumb,
    };
  },
};
</script>

<style lang="scss" scoped>
.btn {
  @apply flex items-center rounded hover:bg-gray-200;
}

.h-center {
  @apply flex justify-center items-center;
}

.breadcrumb {
  overflow-x: overlay;
  &::-webkit-scrollbar {
    height: 4px;
  }
  &::-webkit-scrollbar-thumb {
    border-radius: 2px;
    background-color: #9ca3af;
    // border: 3px solid transparent;
    // background-clip: padding-box;
  }
  &::-webkit-scrollbar-thumb:hover {
    background-color: #4b5563;
  }
}
</style>
